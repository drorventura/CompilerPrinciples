/* is_equal.asm
 * 
 * Programmer: Keren Fruchter
 */

IS_EQUAL:
	PUSH(FP);
	MOV(FP,SP);
	PUSH(R1);
	PUSH(R2);
	MOV(R1,FPARG(2));
	MOV(R2,FPARG(3));

	CMP(IND(R1),IND(R2));
	JUMP_NE(IS_EQ_FALSE);

	CMP(IND(R1),T_BOOL);
	JUMP_EQ(CHECK_VALUES);

	CMP(IND(R1),T_CHAR);
	JUMP_EQ(CHECK_VALUES);

	CMP(IND(R1),T_INTEGER);
	JUMP_EQ(CHECK_VALUES);

	CMP(IND(R1),T_SYMBOL);
	JUMP_EQ(CHECK_VALUES);
	
	CMP(R1,R2);
	JUMP_EQ(IS_EQ_TRUE);
	JUMP(IS_EQ_FALSE);

CHECK_VALUES:
	CMP(INDD(R1,1),INDD(R2,1));
	JUMP_NE(IS_EQ_FALSE);

IS_EQ_TRUE:
	MOV(R0,IMM(5));
	POP(R2);
	POP(R1);
	POP(FP);
	RETURN;	

IS_EQ_FALSE:
	MOV(R0,IMM(3));
	POP(R2);
	POP(R1);
	POP(FP);
	RETURN;
